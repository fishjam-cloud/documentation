---
sidebar_position: 1
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import InstallPackage from "./_components/install-package.mdx";
import ConfigurePermissions from "./_components/configure-permissions.mdx";

# Installation

## Optional: Create a New App

<details>
  <summary>Follow these steps to create a new mobile app</summary>

If you don't have an existing project, you can create a new Expo app using a template

```bash
npx create-expo-app@latest my-video-app
```

As the next step, you have to generate native files with the `expo prebuild` command:

```bash
npx expo prebuild
```

You can also follow more detailed [Expo instructions](https://docs.expo.dev/get-started/introduction/).

</details>

## Step 1: Install the Package

Install `@fishjam-cloud/react-native-client` with your preferred package manager.

<InstallPackage />

## Step 2: Configure App Permissions

<ConfigurePermissions />

## Optional: Request Camera and Microphone Permissions

> **Important:**
> You usually don't need to explicitly ask for camera or microphone permissions in your code. By default, the user will be prompted for permissions automatically when the relevant component mounts.

If you want more control, you can use the `useCameraPermissions` and `useMicrophonePermissions` hooks to manage permissions manually. Both hooks return an array with three elements:

1. `permission`: The current permission status
2. `requestPermission`: A function to request permission
3. `getPermission`: A function to get the current permission status

Here's an example of how to use both hooks:

```tsx
import {
  useCameraPermissions,
  useMicrophonePermissions,
} from "@fishjam-cloud/react-native-client";
import { useEffect } from "react";

const [cameraPermission, requestCameraPermission, getCameraPermission] =
  useCameraPermissions();

const [
  microphonePermission,
  requestMicrophonePermission,
  getMicrophonePermission,
] = useMicrophonePermissions();

useEffect(() => {
  requestCameraPermission();
  requestMicrophonePermission();
}, []);
```

**PermissionResponse**

The `permission` object has the following properties:

- `canAskAgain`: Indicates if the user can be asked again for this permission. If `false`, direct the user to the Settings app to enable/disable the permission.
- `expires`: When the permission expires.
- `granted`: Indicates if the permission is granted.
- `status`: The current status of the permission.

> **Note:**
> You can control whether the hook automatically fetches the current permission status or requests permission by passing an `options` object to the hook. By default, `get` is called automatically (auto fetch is `true`), and `request` is not (auto request is `false`).
>
> For example:
>
> ```tsx
> // Do not auto-fetch permission status, enable auto-request
> const [permission, requestPermission] = useCameraPermissions({
>   get: false, // disables auto-fetch
>   request: true, // enables auto-request
> });
> ```
>
> Adjust these options to fit your app's needs.
