---
type: explanation
---

# Core Concepts

**Explanation** - _Essential concepts you need to understand to work with Fishjam_

Understanding these core concepts will help you design and build applications with Fishjam more effectively.

## Rooms

### What is a Room?

A **room** is a logical container that groups participants together for multimedia communication. Think of it as a virtual meeting space where peers can join to share audio and video.

### Room Characteristics

- **Unique identity**: Each room has a unique ID
- **Type-specific**: Room type (full_feature, audio_only, livestream) is set at creation
- **Isolated**: Participants in different rooms cannot interact
- **Temporary**: Rooms exist only while needed, can be deleted when empty

### Room Lifecycle

1. **Creation**: Backend creates room using Server SDK
2. **Population**: Peers are added to the room
3. **Activity**: Peers connect and communicate
4. **Cleanup**: Room is deleted when no longer needed

## Peers

### What is a Peer?

A **peer** represents a single participant in a room. Each peer corresponds to one client connection (e.g., one user's phone or browser).

### Peer Characteristics

- **Room-scoped identity**: Each peer belongs to a specific room and has a unique ID within that room
- **Associated metadata**: Custom data attached when creating the peer
- **Track ownership**: Peers own the tracks (audio/video streams) they send
- **State management**: Connection status, track states

### Peer Lifecycle

1. **Creation**: Backend creates peer in a room (gets peer token)
2. **Connection**: Client uses peer token to connect to room
3. **Media sharing**: Peer sends/receives tracks
4. **Disconnection**: Peer leaves room or connection drops
5. **Cleanup**: Peer is removed from room

## Tracks

### What is a Track?

A **track** represents a single stream of media data - either audio or video. Each track carries one type of media from one source.

### Track Types

- **Video tracks**: Camera feed, screen sharing, custom video
- **Audio tracks**: Microphone, system audio, custom audio

### Track Characteristics

- **Owned by peers**: Each track belongs to one peer
- **Typed**: Video or audio, cannot change type
- **Stateful**: Active/inactive, enabled/disabled
- **Metadata**: Description, source information

### Track Examples

- Camera from user's phone → Video track
- Microphone from user's computer → Audio track
- Screen sharing → Video track (screen content)
- Shared app audio → Audio track (application sound)

## Tokens

### Management Tokens

**Management tokens** is a long-lived credential that authorize your backend to control Fishjam resources. You can retrieve your management tokens from the Fishjam Cloud Dashboard.

#### Characteristics

- **Backend-only**: Never expose to client applications
- **Full access**: Can create/delete rooms and peers

#### Usage

```typescript
import { FishjamClient } from "@fishjam-cloud/js-server-sdk";
const fishjamUrl = "";
process.env.MANAGEMENT_TOKEN = "";

// ---cut---

const fishjamClient = new FishjamClient({
  fishjamUrl,
  managementToken: process.env.MANAGEMENT_TOKEN,
});
```

### Peer Tokens

**Peer tokens** are short-lived credentials that allow client applications to join specific rooms.

#### Characteristics

- **Client-safe**: Safe to send to frontend applications
- **Short-lived**: Expire after reasonable time period
- **Room-specific**: Grant access to one specific room only
- **Peer-specific**: Tied to one peer identity

#### Generation

```typescript
import { FishjamClient, RoomId } from "@fishjam-cloud/js-server-sdk";

const fishjamUrl = "";
const roomId = "" as unknown as RoomId;
const response = { json: (_: any) => {} };

const fishjamClient = new FishjamClient({
  fishjamUrl,
  managementToken: "",
});

// ---cut---

// Backend generates peer token
const { peer, peerToken } = await fishjamClient.createPeer(roomId, {
  metadata: { name: "John Doe" },
});

// Send to client
response.json({ peerToken, fishjamUrl });
```

#### Usage

```typescript
import { useConnection } from "@fishjam-cloud/react-client";
const fishjamUrl = "";
const peerToken = "";
// ---cut---
const { joinRoom } = useConnection();

// Client uses peer token to connect
await joinRoom({ url: fishjamUrl, peerToken });
```

## Metadata

### What is Metadata?

**Metadata** is custom data associated with peers that other participants can read. There are two types of metadata in Fishjam:

- **Server-side metadata**: Set when creating a peer on the backend (using the Server SDK). This metadata is safe, immutable, and securely bound to a specific peer token. Other participants can read this data.
- **Client-side metadata**: Set by the client when connecting with a peer token. This metadata is considered "unsafe" because it is controlled by the client and can be modified at any time.

Use server-side metadata for any information that must be trusted or used for permissions, and client-side metadata for transient or user-controlled data.

### Use Cases

- **User information**: Names, avatars, roles
- **Application state**: User preferences, permissions
- **Custom identifiers**: External user IDs, session data

### Example

```typescript
import { FishjamClient, RoomId } from "@fishjam-cloud/js-server-sdk";

const fishjamUrl = "";

const fishjamClient = new FishjamClient({
  fishjamUrl,
  managementToken: "",
});

const roomId = "" as unknown as RoomId;

// ---cut---

// Backend sets metadata when creating peer
const { peer, peerToken } = await fishjamClient.createPeer(roomId, {
  metadata: {
    name: "Alice Johnson",
    role: "presenter",
    avatar: "https://example.com/avatar.jpg",
    userId: "user-123",
  },
});
```

```typescript
import { usePeers } from "@fishjam-cloud/react-client";

// ---cut---

// Clients can read metadata of all peers
const { remotePeers } = usePeers();

remotePeers.forEach((peer) => {
  console.log(peer.metadata); // {name: "Alice Johnson"}
});
```

## Connection States

### Peer Connection States

Understanding connection states helps with UI and error handling:

- **`connecting`**: Attempting to join room
- **`connected`**: Successfully connected and ready
- **`reconnecting`**: Temporarily disconnected, attempting to reconnect
- **`disconnected`**: Permanently disconnected from room

### Track States

Tracks also have states that affect media flow:

- **`active`**: Track is sending/receiving media
- **`inactive`**: Track exists but no media flowing
- **`enabled`**: Track is enabled (user choice)
- **`disabled`**: Track is disabled (user choice)

## Room vs Peer vs Track Hierarchy

```
Room (container)
├── Peer 1 (participant)
│   ├── Video Track (camera)
│   ├── Audio Track (microphone)
│   └── Video Track (screen share)
├── Peer 2 (participant)
│   ├── Video Track (camera)
│   └── Audio Track (microphone)
└── Peer 3 (participant)
    └── Audio Track (microphone only)
```

## Data Flow Example

Here's a complete example of how these concepts work together:

### 1. Room Setup (Backend)

```typescript
import { FishjamClient } from "@fishjam-cloud/js-server-sdk";

const fishjamUrl = "";
const fishjamClient = new FishjamClient({
  fishjamUrl,
  managementToken: "",
});

// ---cut---

// Create room
const room = await fishjamClient.createRoom({ roomType: "full_feature" });

// Add peer for Alice
const { peer: alicePeer, peerToken: aliceToken } =
  await fishjamClient.createPeer(room.id, {
    metadata: { name: "Alice", role: "host" },
  });

// Add peer for Bob
const { peer: bobPeer, peerToken: bobToken } = await fishjamClient.createPeer(
  room.id,
  {
    metadata: { name: "Bob", role: "participant" },
  },
);
```

### 2. Client Connection

```typescript
import { useConnection } from "@fishjam-cloud/react-client";

const fishjamUrl = "";
const peerToken = "";
const aliceToken = "";
const bobToken = "";
const { joinRoom } = useConnection();

// ---cut---

// Alice's client connects
await joinRoom({ url: fishjamUrl, peerToken: aliceToken });

// Bob's client connects
await joinRoom({ url: fishjamUrl, peerToken: bobToken });
```

### 3. Media Sharing

- Alice starts camera → Creates video track
- Alice starts microphone → Creates audio track
- Bob starts microphone → Creates audio track
- Bob receives Alice's video and audio tracks
- Alice receives Bob's audio track

## Next Steps

Now that you understand the core concepts:

- Learn about [Room Types](/explanation/room-types) and when to use each
- Understand [Security & Tokens](/explanation/security-tokens) in detail
- See how it all works in [Fishjam Architecture](/explanation/architecture)

Ready to implement? Start with:

- [React Native Quick Start](/tutorials/react-native-quick-start)
- [Backend Quick Start](/tutorials/backend-quick-start)
