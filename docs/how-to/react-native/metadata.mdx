---
sidebar_position: 8
title: "Metadata"
description: "How to use metadata"
---

import MetadataHeader from "../_common/metadata/header.mdx";
import JoiningRoom from "../_common/metadata/joining_room.mdx";
import UpdatingMetadata from "../_common/metadata/updating.mdx";
import ReadingMetadata from "../_common/metadata/reading.mdx";

<MetadataHeader />

<JoiningRoom>

```tsx
const PEER_TOKEN = "some-peer-token";
// ---cut---
import React, { useCallback } from "react";
import { Button } from "react-native";
import { useConnection } from "@fishjam-cloud/mobile-client";

type PeerMetadata = {
  displayName: string;
};

export function JoinRoomButton() {
  const { joinRoom } = useConnection();

  const onPressJoin = useCallback(async () => {
    // Note: fishjamId is passed to FishjamProvider, not joinRoom
    await joinRoom<PeerMetadata>({
      peerToken: PEER_TOKEN,
      peerMetadata: { displayName: "John Wick" }, // [!code highlight]
    });
  }, [joinRoom]);

  return <Button onPress={onPressJoin} title="Join Room" />;
}
```

</JoiningRoom>

<UpdatingMetadata>

```tsx
import React, { useCallback } from "react";
import { Button } from "react-native";
import { useUpdatePeerMetadata } from "@fishjam-cloud/mobile-client";

type PeerMetadata = {
  displayName: string;
};

export function UpdateNameButton() {
  const { updatePeerMetadata } = useUpdatePeerMetadata<PeerMetadata>(); // [!code highlight]

  const onPressUpdateName = useCallback(async () => {
    await updatePeerMetadata({ displayName: "Thomas A. Anderson" }); // [!code highlight]
  }, [updatePeerMetadata]);

  return <Button onPress={onPressUpdateName} title="Change name" />;
}
```

</UpdatingMetadata>

<ReadingMetadata>

```tsx
import React from "react";
import { Text, View } from "react-native";
import { usePeers } from "@fishjam-cloud/mobile-client";

type PeerMetadata = {
  displayName: string;
};

type ServerMetadata = {
  realName: string;
};

export function ListAllNames() {
  const { remotePeers } = usePeers<PeerMetadata, ServerMetadata>(); // [!code highlight]

  return (
    <View>
      {remotePeers.map((peer) => (
        // [!code highlight:4]
        <Text key={peer.id}>
          Display name: {peer.metadata?.peer?.displayName || "Unknown"}
          Real name: {peer.metadata?.server?.realName || "Unknown"}
        </Text>
      ))}
    </View>
  );
}
```

</ReadingMetadata>
