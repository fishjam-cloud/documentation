---
sidebar_position: 2
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# Connecting

This article will guide you through the process of connecting to a Fishjam room.

## Getting URL and token

In order to connect, you need to obtain a **Peer Token** (the token that will authenticate the peer in
your Room).

<Tabs groupId="app-type">

  <TabItem value="sandbox" label="Sandbox App">

Once you create your account on [Fishjam](https://fishjam.io), you will have access to the Sandbox environment as part of the Mini Jar plan.
While using the Sandbox environment, [you can use the Sandbox API](/how-to/features/sandbox-api-testing) to generate peer tokens for testing or development purposes.
This is basically a service that will create a Room, add your app as
the Room's Peer, and return the token required to use that Room.

```ts
import { useSandbox } from "@fishjam-cloud/react-native-client";
const SANDBOX_FISHJAM_ID = "...";
const roomName = "room";
const peerName = "user";
// ---cut---

// The `useSandbox` hook will work ONLY with the FISHJAM_ID of the Sandbox environment
const { getSandboxPeerToken } = useSandbox({ fishjamId: SANDBOX_FISHJAM_ID });
const peerToken = await getSandboxPeerToken(roomName, peerName);
```

  </TabItem>
  <TabItem value="production" label="Production App">

For the production app, you need to implement your own backend service that will provide the user with a **Peer Token**. To do that,
follow our [server setup instructions](/how-to/backend/server-setup).

  </TabItem>
</Tabs>

## Connecting

In order to connect, call [`joinRoom`](/api/mobile/functions/useConnection#joinroom) method with the `peerToken` and the fishjam ID:

```tsx
import React, { useCallback } from "react";
import { Button } from "react-native";
import { useConnection, useSandbox } from "@fishjam-cloud/react-native-client";

// Check https://fishjam.io/app/ for your Fishjam ID
const FISHJAM_ID = "...";

export function JoinRoomButton() {
  const { joinRoom } = useConnection(); // [!code highlight]
  const { getSandboxPeerToken } = useSandbox({ fishjamId: FISHJAM_ID });

  const onPressJoin = useCallback(async () => {
    // in production environment, get the peerToken from your backend
    const peerToken = await getSandboxPeerToken("Room", "User");

    await joinRoom({ fishjamId: FISHJAM_ID, peerToken }); // [!code highlight]
  }, [joinRoom]);

  return <Button onPress={onPressJoin} title="Join Room" />;
}
```

## Disconnecting

In order to close the connection, you have to call [`leaveRoom`](/api/mobile/functions/useConnection#leaveroom) method.

```tsx
import React, { useCallback } from "react";
import { Button } from "react-native";
import { useConnection } from "@fishjam-cloud/react-native-client";

export function LeaveRoomButton() {
  const { leaveRoom } = useConnection(); // [!code highlight]

  const onPressLeave = useCallback(async () => {
    await leaveRoom(); // [!code highlight]
  }, [leaveRoom]);

  return <Button onPress={onPressLeave} title="Leave Room" />;
}
```
