---
sidebar_position: 3
---

# Start streaming

How to stream your camera

:::tip[Enable devices before connecting]

You can enable your camera and microphone before calling connect method.
This way, you can show user camera preview. Once connect method is called,
enabled camera and microphone will start streaming to Room.

:::

## Enable your camera

First, you have to enable your camera by calling [`startCamera`](../../api/mobile/functions/useCamera#startcamera) method.
You can show camera preview with `RTCView` component.

```tsx
import React, { useEffect } from "react";
import { View, Text } from "react-native";
import { useCamera, RTCView } from "@fishjam-cloud/mobile-client";

//TODO: FCE-2487 remove it when MediaStream will be updated
interface MediaStreamWithURL extends MediaStream {
  toURL(): string;
}

export function CameraPreview() {
  const { startCamera, cameraStream } = useCamera(); // [!code highlight]

  useEffect(() => {
    startCamera(); // [!code highlight]
  }, [startCamera]);

  const streamURL = cameraStream
    ? (cameraStream as MediaStreamWithURL).toURL()
    : null;

  return (
    <View>
      {streamURL ? (
        <RTCView
          streamURL={streamURL}
          style={{ height: 300, width: 300 }}
          objectFit="cover"
          mirror={true}
        />
      ) : (
        <Text>No camera stream</Text>
      )}
    </View>
  );
}
```

### Listing user cameras

To list all cameras available on device, you can use [`cameraDevices`](../../api/mobile/functions/useCamera#cameradevices) property from [`useCamera`](../../api/mobile/functions/useCamera) hook.
This way, you can either automatically choose camera (front/back) or allow user to select camera type.

To change camera, simply call [`selectCamera`](../../api/mobile/functions/useCamera#selectcamera) method.

```tsx
import React, { useCallback, useState } from "react";
import { Button } from "react-native";
import { useCamera, DeviceItem } from "@fishjam-cloud/mobile-client";

export function FlipButton() {
  const { cameraDevices, selectCamera, currentCamera } = useCamera(); // [!code highlight]
  const [currentIndex, setCurrentIndex] = useState(0);

  const onPressFlipCamera = useCallback(() => {
    if (cameraDevices.length === 0) return;

    // Cycle through available cameras
    const nextIndex = (currentIndex + 1) % cameraDevices.length;
    const nextCamera = cameraDevices[nextIndex];
    if (nextCamera) {
      selectCamera(nextCamera.deviceId); // [!code highlight]
      setCurrentIndex(nextIndex);
    }
  }, [cameraDevices, currentIndex, selectCamera]);

  return <Button onPress={onPressFlipCamera} title="Flip Camera" />;
}
```

### Disabling/enabling camera

To change camera state, you use [`toggleCamera`](../../api/mobile/functions/useCamera#togglecamera) method.

```tsx
import { Button } from "react-native";
import React from "react";
import { useCamera } from "@fishjam-cloud/mobile-client";

export function ToggleCameraButton() {
  const { isCameraOn, toggleCamera } = useCamera(); // [!code highlight]

  return (
    <Button
      onPress={toggleCamera} // [!code highlight]
      title={isCameraOn ? "Disable camera" : "Enable camera"}
    />
  );
}
```

## Enable microphone

Microphone works similar to camera. In order to enable it, you have to call [`toggleMicrophone`](../../api/mobile/functions/useMicrophone#togglemicrophone) method.

```tsx
import { Button } from "react-native";
import React from "react";
import { useMicrophone } from "@fishjam-cloud/mobile-client";

export function ToggleMicrophoneButton() {
  const { isMicrophoneOn, toggleMicrophone } = useMicrophone(); // [!code highlight]

  return (
    <Button
      onPress={toggleMicrophone} // [!code highlight]
      title={isMicrophoneOn ? "Disable microphone" : "Enable microphone"}
    />
  );
}
```
