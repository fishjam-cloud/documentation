---
sidebar_position: 8
---

# Livestreaming

This section provides examples on how to quickly set up livestreaming in React using Fishjam.  
You can learn more about [livestreaming in Fishjam](/how-to/features/livestreaming) in our documentation.

## How to start streaming?

### Prerequisites

- [A room of `livestream` type](/how-to/features/livestreaming)
- A [peer token](/explanation/glossary#peer-token) generated for that room

To start streaming, simply [join the livestream room](/how-to/react/connecting) and [stream as you normally would](/how-to/react/start-streaming).

:::note
Livestreaming scenario allows only one video and one audio track to be sent at a time.  
Any additional tracks will be ignored and will not be available to the viewers.
:::

## How to receive the stream?

### Prerequisites

- A peer connected and streaming in a room of `livestream` type
- A [viewer token](/how-to/features/livestreaming) generated for that room

Fishjam SDK provides the [`useLivestream`](/api/web/functions/useLivestream) hook to receive the broadcasted stream.
The [`useLivestream`](/api/web/functions/useLivestream) hook will provide a [MediaStream](https://developer.mozilla.org/en-US/docs/Web/API/MediaStream) object once the connection with Fishjam is established.

```tsx
import React, { useEffect, useRef } from "react";
import { useLivestream } from "@fishjam-cloud/react-client";

interface LivestreamProps {
  viewerToken: string;
}

const FISHJAM_LIVESTREAM_URL = "https://fishjam.io/api/v1/live";

export function Livestream({ viewerToken }: LivestreamProps) {
  const videoRef = useRef<HTMLVideoElement>(null);

  const { connect, disconnect, stream } = useLivestream();

  useEffect(() => {
    if (!videoRef.current) return;
    videoRef.current.srcObject = stream ?? null;
  }, [stream]);

  useEffect(() => {
    connect(FISHJAM_LIVESTREAM_URL, viewerToken);

    return () => {
      disconnect();
    };
  }, [connect, disconnect, viewerToken]);

  // stream is null until the connection is established
  if (!stream) return null;

  return <video ref={videoRef} autoPlay />;
}
```
